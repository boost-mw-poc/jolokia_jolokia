<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<!-- Generated by Apache Maven Doxia at 2023-07-12 -->
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
    <meta name="keywords" content="jmx, rest, json, http, agent, jmx-rest-bridge, java, jmx4perl, jsr-160, jmx-rest"/>
    <title>Jolokia &#x2013; JMX Proxy</title>
    <style type="text/css" media="all">
      @import url("../css/reset.css");
      @import url("../css/text.css");
      @import url("../css/960_24_col.css");
      @import url("../css/maven-base.css");
      @import url("../css/prettify.css");
      @import url("../css/maven-theme.css");
      @import url("../css/site.css");
    </style>
    <script data-cfasync="false" type="text/javascript">
       var host = "jolokia.org";
       if ((host == window.location.host) && (window.location.protocol != "https:")) {
            window.location.protocol = "https";
       }
    </script>
    <script type="text/javascript">
  var _gaq = _gaq || [];
  _gaq.push(['_setAccount', 'UA-9534565-3']);
  _gaq.push(['_setDomainName', '.jolokia.org']);
  _gaq.push(['_trackPageview']);

  (function() {
    var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
    ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
  })();
    </script>
    <script type="text/javascript" src="../js/prettify/prettify.js"></script>
    <link rel="stylesheet" href="../css/print.css" type="text/css" media="print" />
    <link rel="icon" type="image/png" href="../images/favicon.png" />
      <meta name="author" content="Roland Huss" />
    <meta name="Date-Revision-yyyymmdd" content="20230712" />
    <meta http-equiv="Content-Language" content="en" />
     
  </head>
  <body class="composite" onload="prettyPrint()">
    <div class="container_24">

      <!-- Header -->
      <div class="grid_24 header">
        <div></div>
      </div>
      <div class="clear"></div>

      <!-- Top-Bar  -->
      <div class="grid_24 top_bar">
          <div class="top_left"></div>
      <div class="top_link">
        <a href="../index.html">Home</a>
    </div>
    <div class="top_sep"></div>
      <div class="top_link">
        <a href="../download.html">Download</a>
    </div>
    <div class="top_sep"></div>
      <div class="top_link">
        <a href="../features-nb.html">Features</a>
    </div>
    <div class="top_sep"></div>
      <div class="top_link">
        <a href="../documentation.html">Documentation</a>
    </div>
    <div class="top_sep"></div>
      <div class="top_link">
        <a href="../support.html">Support</a>
    </div>
    <div class="top_sep"></div>
      <div class="top_link">
        <a href="https://ro14nd.de">Blog</a>
    </div>
    <div class="top_sep"></div>
      <div class="top_link">
        <a href="../about.html">About</a>
    </div>
    <div class="top_sep"></div>
        </div>
      <div class="clear"></div>

      <!-- Main-Box  -->
      <div class="grid_24 main_box">
        <!-- Main-Top -->
        <div class="grid_24 alpha main_top"></div>
        <div class="grid_24 alpha main_content">
          <!-- Navigation -->
          <div class="grid_5 alpha">
                  <div class="navibox">
          <div class="navihead">
             <h5>Jolokia</h5>
            </div>    
            <div class="naviitems">
    <ul>
                  <li class="none">
                          <a href="../download.html" title="Download">Download</a>
            </li>
                  <li class="none">
                          <a href="../features-nb.html" title="Features">Features</a>
            </li>
                  <li class="none">
                          <a href="../support.html" title="Support">Support</a>
            </li>
                  <li class="none">
                          <a href="../forum.html" title="Forum">Forum</a>
            </li>
                  <li class="none">
                          <a href="../irc.html" title="IRC">IRC</a>
            </li>
                  <li class="none">
                          <a href="../license.html" title="License">License</a>
            </li>
          </ul>
    </div>
      </div>
      <div class="navibox">
          <div class="navihead">
             <h5>Documentation</h5>
            </div>    
            <div class="naviitems">
    <ul>
                  <li class="none">
                          <a href="../documentation.html" title="Overview">Overview</a>
            </li>
                  <li class="none">
                          <a href="../tutorial.html" title="Tutorial">Tutorial</a>
            </li>
                  <li class="none">
                          <a href="../reference/html/index.html" title="Reference Manual">Reference Manual</a>
            </li>
                  <li class="none">
                          <a href="../talks.html" title="Talks and Screencasts">Talks and Screencasts</a>
            </li>
          </ul>
    </div>
      </div>
      <div class="navibox">
          <div class="navihead">
             <h5>Agents</h5>
            </div>    
            <div class="naviitems">
    <ul>
                  <li class="none">
                          <a href="../agent.html" title="Overview">Overview</a>
            </li>
                  <li class="none">
                          <a href="../agent/war.html" title="Web Archive (war)">Web Archive (war)</a>
            </li>
                  <li class="none">
                          <a href="../agent/osgi.html" title="Osgi">Osgi</a>
            </li>
                  <li class="none">
                          <a href="../agent/jvm.html" title="JVM">JVM</a>
            </li>
                  <li class="none">
                          <a href="../agent/mule.html" title="Mule">Mule</a>
            </li>
          </ul>
    </div>
      </div>
      <div class="navibox">
          <div class="navihead">
             <h5>Clients</h5>
            </div>    
            <div class="naviitems">
    <ul>
                  <li class="none">
                          <a href="../client/java.html" title="Java">Java</a>
            </li>
                  <li class="none">
                          <a href="../client/javascript.html" title="Javascript">Javascript</a>
            </li>
                  <li class="none">
                          <a href="../client/perl.html" title="Perl">Perl</a>
            </li>
          </ul>
    </div>
      </div>
      <div class="navibox">
          <div class="navihead">
             <h5>Project Documentation</h5>
            </div>    
            <div class="naviitems">
    <ul>
                                                                                                                                                              <li class="collapsed">
                          <a href="../project-info.html" title="Project Information">Project Information</a>
                  </li>
                                                                    <li class="collapsed">
                          <a href="../project-reports.html" title="Project Reports">Project Reports</a>
                  </li>
          </ul>
    </div>
      </div>
            </div>
          <!-- Main Box -->
          <div class="grid_18 omega">
            <div class="content_box grid_18 alpha">
              <div class="content_top_bg content_top grid_18 alpha"></div>
              <div class="content_content_bg content_content grid_18">
                <!-- ~ Copyright 2009-2013 Roland Huss
  ~
  ~ Licensed under the Apache License, Version 2.0 (the "License");
  ~ you may not use this file except in compliance with the License.
  ~ You may obtain a copy of the License at
  ~
  ~       http://www.apache.org/licenses/LICENSE-2.0
  ~
  ~ Unless required by applicable law or agreed to in writing, software
  ~ distributed under the License is distributed on an "AS IS" BASIS,
  ~ WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
  ~ See the License for the specific language governing permissions and
  ~ limitations under the License. -->

  
    <div class="section">
<h2><a name="JMX_Proxy"></a>JMX Proxy</h2>
      
<div class="feature_icon_large">
        <img src="../images/features/proxy_large.png" alt="JMX Proxy" />
      </div>
      
<p>
        There are situations, where a deployment of an Jolokia agent
        on the target platform is not possible. This might be for
        political reasons or an already established JSR-160 export on
        the instrumented servers. In these environments, Jolokia can
        operate as a <b>JMX Proxy</b>. In this setup, the
        agent is deployed on a dedicated proxy Java EE server (or other
        supported agent platform). The proxy bridges between Jolokia
        JSON request and responses to remote JSR-160 calls to the
        target server. The following diagrams gives an illustration of
        this setup.
      </p>
      
<div align="center" style="margin: 20px 120px;">
        <img src="../images/jolokia_proxy.png" alt="Proxy Mode" />
      </div>
      
<p>
        A Jolokia proxy is universal and agnostic to the target server
        as it gets its information for the target via an incoming
        request (the same as for an HTTP proxy). Due to this required
        extended information, only Jolokia POST requests can be used
        for proxying since there is currently no way to encapsulate
        the target information within a GET Url. The base Jolokia URL
        for the request is that of the proxy server, whereas the
        target parameters are included in the request. In the next
        example, a proxied Jolokia request queries the number of
        active threads for a server <tt>jboss-as</tt> via a proxy
        <tt>tomcat-proxy</tt>, which has an agent deployed under
        the context <tt>jolokia</tt>. The agent URL then is
        something like
      </p>
      
<div>
<pre>
http://jolokia-proxy:8080/jolokia</pre></div>
      
<p>and the POST payload of the request is</p>
      
<div>
<pre class="prettyprint">
  {
    &quot;type&quot;:&quot;READ&quot;
    &quot;mbean&quot;:&quot;java.lang:type=Threading&quot;,
    &quot;attribute&quot;:&quot;ThreadCount&quot;,
    &quot;target&quot;: {
                &quot;url&quot;:&quot;service:jmx:rmi:///jndi/rmi://jboss-as:8686/jmxrmi&quot;,
                &quot;password&quot;:&quot;admin&quot;,
                &quot;user&quot;:&quot;s!cr!t&quot;
              },
  }
</pre></div>
      
<p>
        The target is part of the request and can contain
        authentication information as well (with params
        <tt>user</tt> and <tt>password</tt>)
      </p>
      
<div class="section">
<h3><a name="Limitations"></a>Limitations</h3>
        
<p>
          Operating Jolokia as a JMX proxy has some limitations
          compared to a native agent deployment:
        </p>
        
<ul>
          
<li>
            <a href="bulk-requests.html">Bulk requests</a> are
            possible but not as efficient as for direct operation. The
            reason is, that JSR-160 remoting doesn't know about bulk
            requests, so that a Jolokia bulk request arriving at the
            proxy gets dispatched into multiple JSR-160 requests for the
            target. The JSR-160 remote connection has to be
            established only once, though.
          </li>
          
<li>
            The JMX target URL addresses the MBeanServer directly, so
            MBeanServer merging as it happens for direct operation is
            not available. Also, certain workarounds for bugs in the
            server's JMX implementation are not available. (e.g. see
            this <a class="externalLink" href="http://labs.consol.de/blog/jmx4perl/jboss-remote-jmx/">blog post</a> for a JBoss bug when
            accessing MXBeans in the PlatformMBeanServer)
          </li>
          
<li>
            When no-standard Java types are returned by JMX operations
            or attribute read calls, these types must be available on
            the proxy, too. Using the Jolokia agent directly, complex
            data types are serialized deeply into a JSON
            representation automatically.
          </li>
          
<li>
            For each Jolokia request, a new JMX connection (likely
            using RMI) is created which is an expensive operation. A
            future version of Jolokia will tackle this by providing
            some sort of optional JSR-160 connection pooling.
          </li>
        </ul>
      </div>
      
<div class="section">
<h3><a name="Next"></a>Next</h3>
        
<ul>
          
<li>
            See why how Jolokia can <a href="security.html">secure</a> JMX access in a very fine granular way.
          </li>
          
<li>
            Learn something about <a href="bulk-requests.html">bulk JMX requests</a>.
          </li>
          
<li>
            Go Back to the <a href="../features-nb.html">Features Overview</a>.
          </li>
        </ul>
      </div>
    </div>
  

              </div>
              <div class="content_bottom_bg content_bottom grid_18 omega"></div>
            </div>
          </div>
          <div class="grid_24 alpha">
            <div class="copyright_footer">Copyright &#169;                   2023 Roland Hu&szlig;. 
          All Rights Reserved.      
                
                 <span id="publishDate">Last Published: 2023-07-12</span>
              &nbsp;| <span id="projectVersion">Version: 1.7.3-SNAPSHOT</span>
            </div>
          </div>
          <div class="clear"></div>
        </div>
        <!-- Main Bottom -->
        <div class="grid_24 alpha main_bottom"></div>        
      </div>
    </div>
  </body>
</html>
  
