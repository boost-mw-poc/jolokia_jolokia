<!DOCTYPE html>
<!-- Generated by Apache Maven Doxia at 2023-10-10 -->
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="keywords" content="jmx, rest, json, http, agent, jmx-rest-bridge, java, jmx4perl, jsr-160, jmx-rest">
  <title>Jolokia &#x2013; </title>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Open+Sans:ital,wght@0,300;0,400;0,700;1,300;1,400;1,700&display=swap">
  <style media="all">
    @import url("../css/reset.css");
    @import url("../css/text.css");
    /*@import url("../css/960_24_col.css");*/
    /*@import url("../css/maven-base.css");*/
    /*@import url("../css/maven-theme.css");*/
    @import url("../css/maven-theme-jolokia.css");
        @import url("../css/site.css");
  </style>
  <script data-cfasync="false">
    let host = "jolokia.org";
      if ((host === window.location.host) && (window.location.protocol !== "https:")) {
        window.location.protocol = "https";
      }
  </script>
  <script src="../js/prettify/prettify.js"></script>
  <link rel="stylesheet" href="../css/print.css" media="print">
  <link rel="icon" type="image/png" href="../images/favicon.png">
  <meta name="Date-Revision-yyyymmdd" content="20231010" />
  <meta http-equiv="Content-Language" content="en" />
  
</head>
<body>
<div class="container">
  <!-- Header -->
  <div class="header">
    <div class="header-image"></div>
  </div>

  <!-- Top-Bar  -->
  <nav class="header">
      <div class="top_left"></div>
      <div class="top_link">
        <a href="../index.html">Home</a>
    </div>
    <div class="top_sep"></div>
      <div class="top_link">
        <a href="../download.html">Download</a>
    </div>
    <div class="top_sep"></div>
      <div class="top_link">
        <a href="../features.html">Features</a>
    </div>
    <div class="top_sep"></div>
      <div class="top_link">
        <a href="../documentation.html">Documentation</a>
    </div>
    <div class="top_sep"></div>
      <div class="top_link">
        <a href="../support.html">Support</a>
    </div>
    <div class="top_sep"></div>
      <div class="top_link">
        <a href="https://ro14nd.de">Blog</a>
    </div>
    <div class="top_sep"></div>
      <div class="top_link">
        <a href="../about.html">About</a>
    </div>
    <div class="top_sep"></div>
    </nav>

  <main>
    <nav class="menu">
            <div class="navibox">
          <div class="navihead">
             <h5>Jolokia</h5>
            </div>    
            <div class="naviitems">
    <ul>
                  <li class="none">
                          <a href="../download.html" title="Download">Download</a>
            </li>
                  <li class="none">
                          <a href="../artifacts.html" title="Artifacts">Artifacts</a>
            </li>
                  <li class="none">
                          <a href="../migration.html" title="Migration to 2.0">Migration to 2.0</a>
            </li>
                  <li class="none">
                          <a href="../features.html" title="Features">Features</a>
            </li>
                  <li class="none">
                          <a href="../support.html" title="Support">Support</a>
            </li>
                  <li class="none">
                          <a href="../forum.html" title="Forum">Forum</a>
            </li>
                  <li class="none">
                          <a href="../irc.html" title="IRC">IRC</a>
            </li>
                  <li class="none">
                          <a href="../license.html" title="License">License</a>
            </li>
          </ul>
    </div>
      </div>
      <div class="navibox">
          <div class="navihead">
             <h5>Documentation</h5>
            </div>    
            <div class="naviitems">
    <ul>
                  <li class="none">
                          <a href="../documentation.html" title="Overview">Overview</a>
            </li>
                  <li class="none">
                          <a href="../concepts.html" title="Concepts">Concepts</a>
            </li>
                  <li class="none">
                          <a href="../tutorial.html" title="Tutorial">Tutorial</a>
            </li>
                  <li class="none">
                          <a href="../reference/html/index.html" title="Reference Manual">Reference Manual</a>
            </li>
                  <li class="none">
                          <a href="../talks.html" title="Talks and Screencasts">Talks and Screencasts</a>
            </li>
          </ul>
    </div>
      </div>
      <div class="navibox">
          <div class="navihead">
             <h5>Agents</h5>
            </div>    
            <div class="naviitems">
    <ul>
                  <li class="none">
                          <a href="../agent.html" title="Overview">Overview</a>
            </li>
                  <li class="none">
                          <a href="../agent/war.html" title="Web Archive (war)">Web Archive (war)</a>
            </li>
                  <li class="none">
                          <a href="../agent/osgi.html" title="Osgi">Osgi</a>
            </li>
                  <li class="none">
                          <a href="../agent/jvm.html" title="JVM">JVM</a>
            </li>
                  <li class="none">
            <strong>Mule</strong>
          </li>
          </ul>
    </div>
      </div>
      <div class="navibox">
          <div class="navihead">
             <h5>Clients</h5>
            </div>    
            <div class="naviitems">
    <ul>
                  <li class="none">
                          <a href="../client/java.html" title="Java">Java</a>
            </li>
                  <li class="none">
                          <a href="../client/javascript.html" title="Javascript">Javascript</a>
            </li>
                  <li class="none">
                          <a href="../client/perl.html" title="Perl">Perl</a>
            </li>
          </ul>
    </div>
      </div>
      <div class="navibox">
          <div class="navihead">
             <h5>Project Documentation</h5>
            </div>    
            <div class="naviitems">
    <ul>
                                                                                                                                                              <li class="collapsed">
                          <a href="../project-info.html" title="Project Information">Project Information</a>
                  </li>
                                                                    <li class="collapsed">
                          <a href="../project-reports.html" title="Project Reports">Project Reports</a>
                  </li>
          </ul>
    </div>
      </div>
      </nav>
    <div class="main">
      <!-- Page content -->
      <div class="sect1">
<h2 id="mule_agent_installation">Mule Agent Installation</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Jolokia has also a <a href="https://www.mulesoft.org">Mule
ESB</a> agent which can be deployed on the Mule ESB (running
in standalone mode).</p>
</div>
<div class="paragraph">
<p>The agent jar needs to be stored within the Mule
installation in <code>lib/opt/</code>. Additionally, the Mule
configuration needs to be adapted to contain the following
section:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight nowrap"><code data-lang="xml"><span class="nt">&lt;mule</span> <span class="na">xmlns=</span><span class="s">"http://www.mulesoft.org/schema/mule/core"</span>
      <span class="na">xmlns:xsi=</span><span class="s">"http://www.w3.org/2001/XMLSchema-instance"</span>
      <span class="na">xmlns:spring=</span><span class="s">"http://www.springframework.org/schema/beans"</span>
      <span class="na">xmlns:management=</span><span class="s">"http://www.mulesoft.org/schema/mule/management"</span>
      <span class="na">xsi:schemaLocation=</span><span class="s">"
          http://www.springframework.org/schema/beans
          https://www.springframework.org/schema/beans/spring-beans-current.xsd
          http://www.mulesoft.org/schema/mule/core
          https://www.mulesoft.org/schema/mule/core/current/mule.xsd
          http://www.mulesoft.org/schema/mule/management
          https://www.mulesoft.org/schema/mule/management/current/mule-management.xsd"</span><span class="nt">&gt;</span>

   <span class="c">&lt;!-- .... --&gt;</span>
   <span class="nt">&lt;custom-agent</span> <span class="na">name=</span><span class="s">"jolokia-agent"</span> <span class="na">class=</span><span class="s">"org.jolokia.mule.JolokiaMuleAgent"</span><span class="nt">&gt;</span>
      <span class="nt">&lt;spring:property</span> <span class="na">name=</span><span class="s">"port"</span> <span class="na">value=</span><span class="s">"8899"</span><span class="nt">/&gt;</span>
   <span class="nt">&lt;/custom-agent&gt;</span>
<span class="nt">&lt;/mule&gt;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>Starting up mule doesn&#8217;t yield a startup message anymore, but you can test it by calling the jolokia URL:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>http://localhost:8899/jolokia</pre>
</div>
</div>
<div class="paragraph">
<p>Note the Jolokia agent can be used by a client like <code>jmx4perl</code>,
<code>check_jmx4perl</code> or <code>j4psh</code> like</p>
</div>
<div class="listingblock">
<div class="content">
<pre>jmx4perl http://localhost:8899/jolokia list</pre>
</div>
</div>
<div class="paragraph">
<p>which will result in an output similar to</p>
</div>
<div class="listingblock">
<div class="content">
<pre>Mule.myMule:
    Mule.myMule:name=AllStatistics,type=org.mule.Statistics
        Attributes:
            Enabled                             boolean
        Operations:
            void logSummary()
            java.lang.String printXmlSummary()
            java.lang.String printHtmlSummary()
            void clear()
            java.lang.String printCSVSummary()

 ....
 java.lang:
    java.lang:type=Memory
        Attributes:
            NonHeapMemoryUsage                  CompositeData [ro]
            ObjectPendingFinalizationCount      int [ro]
            Verbose                             boolean
            HeapMemoryUsage                     CompositeData [ro]
        Operations:
            void gc()</pre>
</div>
</div>
<div class="paragraph">
<p>Note that Mule was started here with a server id myMule (startup
option: <code>-M-Dmule.serverId=myMule</code>). As you can see you have
access to the Mule specific MBeans and the Java platform MXBeans
(which BTW is not easy achievable using Mules JSR-160 agents
directly).</p>
</div>
<div class="paragraph">
<p>For enabling basic security the properties user and password can be set:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight nowrap"><code data-lang="xml"><span class="nt">&lt;custom-agent</span> <span class="na">name=</span><span class="s">"jolokia-agent"</span> <span class="na">class=</span><span class="s">"org.jolokia.mule.JolokiaMuleAgent"</span><span class="nt">&gt;</span>
    <span class="nt">&lt;spring:property</span> <span class="na">name=</span><span class="s">"user"</span> <span class="na">value=</span><span class="s">"roland"</span><span class="nt">/&gt;</span>
    <span class="nt">&lt;spring:property</span> <span class="na">name=</span><span class="s">"password"</span> <span class="na">value=</span><span class="s">"wfh"</span><span class="nt">/&gt;</span>
<span class="nt">&lt;/custom-agent&gt;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>On the client side the options <code>--user</code> and <code>--password</code> can be
used with <code>jmx4perl</code> and <code>check_jmx4perl</code> for specifying the
credentials.</p>
</div>
<div class="paragraph">
<p>Finally, all other options as specified as init parameters in
<code>jolokia.war</code> 's <code>web.xml</code> can be used as properties here as well.</p>
</div>
</div>
</div>
      <!-- /Page content -->
    </div>
  </main>

  <footer class="copyright">Copyright &#169;                   2023 Roland Hu&szlig;. 
          All Rights Reserved.      
                
                 <span id="publishDate">Last Published: 2023-10-10</span>
              &nbsp;| <span id="projectVersion">Version: 2.0.0-SNAPSHOT</span>
            </footer>
</div>
</body>
</html>
