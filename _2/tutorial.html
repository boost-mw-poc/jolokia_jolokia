<!DOCTYPE html>
<!-- Generated by Apache Maven Doxia at 2023-12-01 -->
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="keywords" content="jmx, rest, json, http, agent, jmx-rest-bridge, java, jmx4perl, jsr-160, jmx-rest">
  <title>Jolokia &#x2013; </title>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Open+Sans:ital,wght@0,300;0,400;0,700;1,300;1,400;1,700&display=swap">
  <style media="all">
    @import url("./css/reset.css");
    @import url("./css/text.css");
    @import url("./css/maven-theme-jolokia.css");
    @import url("./css/site.css");
  </style>
  <script data-cfasync="false">
    let host = "jolokia.org";
      if ((host === window.location.host) && (window.location.protocol !== "https:")) {
        window.location.protocol = "https";
      }
  </script>
  <script src="./js/prettify/prettify.js"></script>
  <link rel="stylesheet" href="./css/print.css" media="print">
  <link rel="icon" type="image/png" href="./images/favicon.png">
  <meta name="Date-Revision-yyyymmdd" content="20231201" />
  <meta http-equiv="Content-Language" content="en" />
  
</head>
<body>
<div class="container">
  <!-- Header -->
  <div class="header">
    <div class="header-image"></div>
  </div>

  <!-- Top-Bar  -->
  <nav class="header">
      <div class="top_left"></div>
      <div class="top_link">
        <a href="index.html">Home</a>
    </div>
    <div class="top_sep"></div>
      <div class="top_link">
        <a href="download.html">Download</a>
    </div>
    <div class="top_sep"></div>
      <div class="top_link">
        <a href="features.html">Features</a>
    </div>
    <div class="top_sep"></div>
      <div class="top_link">
        <a href="documentation.html">Documentation</a>
    </div>
    <div class="top_sep"></div>
      <div class="top_link">
        <a href="support.html">Support</a>
    </div>
    <div class="top_sep"></div>
      <div class="top_link">
        <a href="https://ro14nd.de">Blog</a>
    </div>
    <div class="top_sep"></div>
      <div class="top_link">
        <a href="about.html">About</a>
    </div>
    <div class="top_sep"></div>
    </nav>

  <main>
    <nav class="menu">
            <div class="navibox">
          <div class="navihead">
             <h5>Jolokia</h5>
            </div>    
            <div class="naviitems">
    <ul>
                  <li class="none">
                          <a href="download.html" title="Download">Download</a>
            </li>
                  <li class="none">
                          <a href="libraries.html" title="Libraries">Libraries</a>
            </li>
                  <li class="none">
                          <a href="migration.html" title="Migration to 2.0">Migration to 2.0</a>
            </li>
                  <li class="none">
                          <a href="features.html" title="Features">Features</a>
            </li>
                  <li class="none">
                          <a href="support.html" title="Support">Support</a>
            </li>
                  <li class="none">
                          <a href="forum.html" title="Forum">Forum</a>
            </li>
                  <li class="none">
                          <a href="irc.html" title="IRC">IRC</a>
            </li>
                  <li class="none">
                          <a href="license.html" title="License">License</a>
            </li>
          </ul>
    </div>
      </div>
      <div class="navibox">
          <div class="navihead">
             <h5>Documentation</h5>
            </div>    
            <div class="naviitems">
    <ul>
                  <li class="none">
                          <a href="documentation.html" title="Overview">Overview</a>
            </li>
                  <li class="none">
                          <a href="concepts.html" title="Concepts">Concepts</a>
            </li>
                  <li class="none">
            <strong>Tutorial</strong>
          </li>
                  <li class="none">
                          <a href="reference/html/index.html" title="Reference Manual">Reference Manual</a>
            </li>
                  <li class="none">
                          <a href="talks.html" title="Talks and Screencasts">Talks and Screencasts</a>
            </li>
          </ul>
    </div>
      </div>
      <div class="navibox">
          <div class="navihead">
             <h5>Agents</h5>
            </div>    
            <div class="naviitems">
    <ul>
                  <li class="none">
                          <a href="agent.html" title="Overview">Overview</a>
            </li>
                  <li class="none">
                          <a href="agent/war.html" title="Web Archive (war)">Web Archive (war)</a>
            </li>
                  <li class="none">
                          <a href="agent/osgi.html" title="Osgi">Osgi</a>
            </li>
                  <li class="none">
                          <a href="agent/jvm.html" title="JVM">JVM</a>
            </li>
          </ul>
    </div>
      </div>
      <div class="navibox">
          <div class="navihead">
             <h5>Clients</h5>
            </div>    
            <div class="naviitems">
    <ul>
                  <li class="none">
                          <a href="client/java.html" title="Java">Java</a>
            </li>
                  <li class="none">
                          <a href="client/javascript.html" title="JavaScript">JavaScript</a>
            </li>
                  <li class="none">
                          <a href="client/perl.html" title="Perl">Perl</a>
            </li>
          </ul>
    </div>
      </div>
      <div class="navibox">
          <div class="navihead">
             <h5>Project Documentation</h5>
            </div>    
            <div class="naviitems">
    <ul>
                                                                                                                                                                                <li class="collapsed">
                          <a href="project-info.html" title="Project Information">Project Information</a>
                  </li>
                                                                    <li class="collapsed">
                          <a href="project-reports.html" title="Project Reports">Project Reports</a>
                  </li>
          </ul>
    </div>
      </div>
      </nav>
    <div class="main">
      <!-- Page content -->
      <div class="sect1">
<h2 id="5_minute_quickstart">5 Minute Quickstart</h2>
<div class="sectionbody">
<div class="paragraph">
<p>In this tutorial, it will be demonstrated how easily a WAR agent
can be installed on a fresh Tomcat, how to verify the
installation and how to access the client.</p>
</div>
<div class="sect2">
<h3 id="preparation">Preparation</h3>
<div class="paragraph">
<p>In order to start on a green field, we are installing a
fresh Tomcat in which the agent-war is going to be
installed. Download Tomcat 7 from its
<a href="https://tomcat.apache.org/download-70.cgi" class="externalLink">site</a> and
extract it:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="bash"><span class="nv">$ </span><span class="nb">tar </span>zxvf apache-tomcat-7.<span class="k">*</span>.tar.gz
<span class="nv">$ </span><span class="nb">cd </span>apache-tomcat-7.<span class="k">*</span>
<span class="nv">$ TC</span><span class="o">=</span><span class="sb">`</span><span class="nb">pwd</span><span class="sb">`</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>Download the Jolokia WAR-agent and copy it into Tomcat&#8217;s
webapp directory:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="bash"><span class="nv">$ </span><span class="nb">cd</span> <span class="nv">$TC</span>/webapps
<span class="nv">$ </span>wget <span class="se">\</span>
    https://repo1.maven.org/maven2/org/jolokia/jolokia-war/1.2.3/jolokia-war-1.2.3.war
<span class="nv">$ </span><span class="nb">mv </span>jolokia-war-1.2.3.war jolokia.war</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="startup_and_verification">Startup and Verification</h3>
<div class="paragraph">
<p>Now the container can be started with:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="bash"><span class="nv">$ $TC</span>/bin/catalina.sh start</code></pre>
</div>
</div>
<div class="paragraph">
<p>In order to verify the installation, point your browser to <a href="https://localhost:8080/jolokia/version" class="bare">https://localhost:8080/jolokia/version</a> which should show up something like</p>
</div>
<div class="imageblock text-center">
<div class="content">
<img src="images/jolokia_browser_version.png" alt="Show up version"/>
</div>
</div>
</div>
<div class="sect2">
<h3 id="a_simple_java_client">A simple Java Client</h3>
<div class="paragraph">
<p>Let&#8217;s try out the client side of Jolokia. This example will
print out the memory usage of your tomcat:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="java"><span class="kn">import</span> <span class="nn">org.jolokia.client.*</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">org.jolokia.client.request.*</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.util.Map</span><span class="o">;</span>

<span class="kd">public</span> <span class="kd">class</span> <span class="nc">JolokiaDemo</span> <span class="o">{</span>

    <span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">main</span><span class="o">(</span><span class="nc">String</span><span class="o">[]</span> <span class="n">args</span><span class="o">)</span> <span class="kd">throws</span> <span class="nc">Exception</span> <span class="o">{</span>
        <span class="nc">J4pClient</span> <span class="n">j4pClient</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">J4pClient</span><span class="o">(</span><span class="s">"https://localhost:8080/jolokia"</span><span class="o">);</span>
        <span class="nc">J4pReadRequest</span> <span class="n">req</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">J4pReadRequest</span><span class="o">(</span><span class="s">"java.lang:type=Memory"</span><span class="o">,</span> <span class="s">"HeapMemoryUsage"</span><span class="o">);</span>
        <span class="nc">J4pReadResponse</span> <span class="n">resp</span> <span class="o">=</span> <span class="n">j4pClient</span><span class="o">.</span><span class="na">execute</span><span class="o">(</span><span class="n">req</span><span class="o">);</span>
        <span class="nc">Map</span><span class="o">&lt;</span><span class="nc">String</span><span class="o">,</span><span class="nc">Long</span><span class="o">&gt;</span> <span class="n">vals</span> <span class="o">=</span> <span class="n">resp</span><span class="o">.</span><span class="na">getValue</span><span class="o">();</span>
        <span class="kt">long</span> <span class="n">used</span> <span class="o">=</span> <span class="n">vals</span><span class="o">.</span><span class="na">get</span><span class="o">(</span><span class="s">"used"</span><span class="o">);</span>
        <span class="kt">long</span> <span class="n">max</span> <span class="o">=</span> <span class="n">vals</span><span class="o">.</span><span class="na">get</span><span class="o">(</span><span class="s">"max"</span><span class="o">);</span>
        <span class="kt">int</span> <span class="n">usage</span> <span class="o">=</span> <span class="o">(</span><span class="kt">int</span><span class="o">)</span> <span class="o">(</span><span class="n">used</span> <span class="o">*</span> <span class="mi">100</span> <span class="o">/</span> <span class="n">max</span><span class="o">);</span>
        <span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">"Memory usage: used: "</span> <span class="o">+</span> <span class="n">used</span> <span class="o">+</span>
                <span class="s">" / max: "</span> <span class="o">+</span> <span class="n">max</span> <span class="o">+</span> <span class="s">" = "</span> <span class="o">+</span> <span class="n">usage</span> <span class="o">+</span> <span class="s">"%"</span><span class="o">);</span>
    <span class="o">}</span>
<span class="o">}</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>Save this code-snippet under <code>JolokiaDemo.java</code>. Then download</p>
</div>
<div class="ulist">
<ul>
<li>
<p><a href="https://repo1.maven.org/maven2/org/jolokia/jolokia-client-java/1.2.3/jolokia-client-java-1.2.3.jar" class="externalLink">jolokia-client-java-1.2.3.jar</a></p>
</li>
<li>
<p><a href="https://mirrors.ibiblio.org/pub/mirrors/maven2/com/googlecode/json-simple/json-simple/1.1.1/json-simple-1.1.1.jar" class="externalLink">json-simple</a></p>
</li>
<li>
<p><a href="https://mirrors.ibiblio.org/pub/mirrors/maven2/org/apache/httpcomponents/httpclient-osgi/4.3.3/httpclient-osgi-4.3.3.jar" class="externalLink">httpclient-osgi-4.3.3.jar</a></p>
</li>
<li>
<p><a href="https://mirrors.ibiblio.org/pub/mirrors/maven2/org/apache/httpcomponents/httpcore/4.3.3/httpcore-4.3.3.jar" class="externalLink">httpcore-4.3.3.jar</a></p>
</li>
<li>
<p><a href="https://mirrors.ibiblio.org/pub/mirrors/maven2/commons-logging/commons-logging/1.1.1/commons-logging-1.1.1.jar" class="externalLink">commons-logging-1.1.1.jar</a></p>
</li>
</ul>
</div>
<div class="paragraph">
<p>and put it into the same directory as this demo
class. Finally, compile the demo and let it run:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="bash"><span class="nv">$ </span><span class="nb">export </span><span class="nv">CLASSPATH</span><span class="o">=</span>json-simple-1.1.1.jar:jolokia-client-java-1.2.3.jar:<span class="se">\</span>
    httpcore-4.3.3.jar:httpclient-osgi-4.3.3.jar:commons-logging-1.1.1.jar:.

<span class="nv">$ </span>javac JolokiaDemo.java
<span class="nv">$ </span>java JolokiaDemo
Memory usage: used: 9526648 / max: 129957888 <span class="o">=</span> 7%</code></pre>
</div>
</div>
<div class="paragraph">
<p>If you are using Maven, please don&#8217;t worry about the
dependencies which just have been downloaded manually for the
sake of demonstration. Jolokia&#8217;s Java client library comes
with a well defined dependency set, so Maven will do the
magic. (In fact, the client library only depends on
jsons-simple and http-components directly)</p>
</div>
</div>
<div class="sect2">
<h3 id="install_jmx4perl">Install Jmx4Perl</h3>
<div class="paragraph">
<p>The five minutes are probably over now, but I highly
recommend to install
<a href="https://www.jmx4perl.org" class="externalLink">jmx4perl</a> right
now. Beside providing a Perl language binding for Jolokia,
there are some cool command line tools included which are
useful on their own.</p>
</div>
<div class="ulist">
<ul>
<li>
<p><strong>jmx4perl</strong> is a command for exploring the
JMX space by providing arguments on the command line.</p>
</li>
<li>
<p><strong>j4psh</strong> is a readline based, colored,
interactive shell with context sensitive command
completion on MBean names and attributes/operations. It
is a perfect tool for interactively exploring MBeans and
their values.</p>
</li>
<li>
<p><strong>check_jmx4perl</strong> is a feature reach Nagios
plugin for connecting the Jolokia agent with Nagios.</p>
</li>
<li>
<p><strong>jolokia</strong> is a supporting script for easy
download and configuration of the Jolokia agents.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p><code>jmx4perl</code> (and its dependencies) can be easily
installed with <code>cpan</code> if you have Perl installed:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="bash"><span class="nv">$ </span>perl <span class="nt">-MCPAN</span> <span class="nt">-e</span> shell
Terminal does not support AddHistory.

cpan shell <span class="nt">--</span> CPAN exploration and modules installation <span class="o">(</span>v1.9205<span class="o">)</span>
ReadLine support available <span class="o">(</span>maybe <span class="nb">install </span>Bundle::CPAN or Bundle::CPANxxl?<span class="o">)</span>

cpan[1]&gt; <span class="nb">install </span>JMX::Jmx4Perl
...
...
jmx4perl
<span class="o">========</span>

jmx4perl is a <span class="nb">command </span>line utility <span class="k">for </span>accessing Jolokia agents
<span class="o">(</span>www.jolokia.org<span class="o">)</span><span class="nb">.</span> It can be used <span class="k">for </span>script based exploration
and easy inspection of the JMX space.

Install <span class="s1">'jmx4perl'</span> ? <span class="o">(</span>y/n<span class="o">)</span> <span class="o">[</span>y <span class="o">]</span>
....</code></pre>
</div>
</div>
<div class="paragraph">
<p>You will be asked for each featured script whether it should
be installed in addition to the core Perl modules. Each of
these scripts (jmx4perl, j4psh, jolokia, check_jmx4perl) will
introduce a set of new depedencies of Perl modules which in
turn might depend on other Perl modules or system
libraries. Perl modules are resolved and installed
automatically. The agent management script
<code>jolokia</code> depends on <code>XML::LibXML</code>
which requires a development version of <code>libxml</code>
installed locally. It is recommended to install
<code>libxml2-dev</code> with the package management tool of
your OS (e.g. <code>apt-get install libxml2-dev</code>
). Alternatively, the OS package for XML::LibXML could be
used. (e.g. <code>libxml-libxml-perl</code> for
Ubuntu)</p>
</div>
<div class="paragraph">
<p>When jmx4perl is installed, try out jmx4perl:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="bash"><span class="nv">$ </span>jmx4perl https://localhost:8080/jolokia list
....
<span class="nv">$ </span>jmx4perl https://localhost:8080/jolokia <span class="se">\</span>
    <span class="nb">read </span>java.lang:type<span class="o">=</span>Memory HeapMemoryUsage
<span class="nv">$ </span>jmx4perl <span class="nt">--help</span>
<span class="nv">$ </span>man jmx4perl</code></pre>
</div>
</div>
<div class="paragraph">
<p>Next, I recommend to try out <code>j4psh</code>.  For
getting the best readline experience, it is recommended to
also install <code>Term::ReadLine::Gnu</code> (which in turn
requires the package <code>libreadline-dev</code> to be
installed), but this is optional. Now, fire up j4psh and let
the fun begin:</p>
</div>
<div class="imageblock text-center">
<div class="content">
<img src="images/j4psh_screenshot.png" alt="j4psh screenshot"/>
</div>
</div>
<div class="paragraph">
<p>Don&#8217;t forget to try out TAB triggered command and argument
completion as demonstrated in this
<a href="https://vimeo.com/20215477" class="externalLink">screencast</a>.</p>
</div>
</div>
<div class="sect2">
<h3 id="summary">Summary</h3>
<div class="paragraph">
<p>That&#8217;s all for now, I hope you enjoyed this first ride. For
the next steps I recommend to have a look into
<a href="reference/html/index.html">reference manual</a>.</p>
</div>
</div>
</div>
</div>
      <!-- /Page content -->
    </div>
  </main>

  <footer class="copyright">Copyright &#169;                   2023 Roland Hu&szlig;. 
          All Rights Reserved.      
                
                 <span id="publishDate">Last Published: 2023-12-01</span>
              &nbsp;| <span id="projectVersion">Version: 2.0.0-SNAPSHOT</span>
            </footer>
</div>
</body>
</html>
